(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5bcfa7cd"],{"1b99":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"common-store-list"},[s("div",{staticClass:"ui-storelist-filter"},[s("ul",{staticClass:"filter-list"},t._l(t.sortkey,(function(e,i){return s("li",{key:e.id,staticClass:"item",class:{sortactive:e.id==t.currentSortKey.id,sortnormal:e.id!=t.currentSortKey.id},on:{click:function(s){return t.setActiveSortkey(e,i)}}},[e.isMore?s("a",[t._v(t._s(t.sort.name))]):s("a",[t._v(t._s(e.name))]),e.isMore?s("span",{staticClass:"iconfont",class:t.isShowMore?"active":""},[t._v("")]):t._e()])})),0),t.isShowMore?s("div",{staticClass:"sort-model"},t._l(t.childSort,(function(e,i){return s("div",{key:e.id,class:{active:e.id==t.sort.id},on:{click:function(s){return t.getSortChild(e)}}},[s("a",[t._v(t._s(e.name))]),e.id==t.sort.id?s("span",{staticClass:"iconfont"},[t._v("")]):t._e()])})),0):t._e()]),s("div",{staticClass:"storelist-body show-store-list"},[s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.getMore,expression:"getMore"}],staticClass:"flex-wrapper",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10"}},[t._l(t.storeList,(function(e,i){return s("div",{key:i,staticClass:"ui-product-body"},[s("div",{staticClass:"list-wrapper",on:{click:function(s){return t.goDetail(e.store_id)}}},[s("div",{staticClass:"list"},[s("div",{staticClass:"ui-image-wrapper"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.store_logo,expression:"item.store_logo"}],staticClass:"product-img"})]),s("div",{staticClass:"flex-right"},[s("div",{staticClass:"product-header"},[s("h3",{staticClass:"title clear-bottom",staticStyle:{"-webkit-box-orient":"vertical"}},[t._v(t._s(e.store_name))])]),s("div",{staticClass:"store-info-wrapper"},[s("div",{staticClass:"store-info"},[s("div",{staticClass:"collect-info"},[t._v("已有 "+t._s(e.store_collect)+" 人关注")]),s("div",{staticClass:"sub-title",staticStyle:{"-webkit-box-orient":"vertical"}},[s("span",{staticClass:"common-score-wrapper"},[s("i",{staticClass:"iconfont front",style:{width:e.store_credit_percent+"%"}}),s("i",{staticClass:"iconfont back"})])])]),s("div",{staticClass:"btn",class:{active:e.is_favorate}},[s("i",{staticClass:"iconfont"},[t._v("")]),t._v("关注")])])])]),e.goods_list&&e.goods_list.length?s("div",{staticClass:"goods-list"},t._l(e.goods_list,(function(e,i){return s("div",{key:i,staticClass:"goods-item"},[s("div",{staticClass:"goods-image"},[s("img",{attrs:{src:e.goods_image_url}})]),s("div",{staticClass:"goods-price"},[t._v("￥"+t._s(e.goods_price))])])})),0):t._e()])])})),t.storeList.length>0?s("div",{staticClass:"loading-wrapper"},[t.isMore?t._e():s("p",{staticClass:"common-no-more"},[t._v("没有更多了")]),t.isMore?s("mt-spinner",{attrs:{type:"triple-bounce",color:"#e93b3d"}}):t._e()],1):t._e(),t.storeList.length<=0&&!t.isMore?s("empty-record"):t._e()],2)])])},r=[],o=(s("8e6e"),s("ac6a"),s("456d"),s("55dd"),s("b6ce"),s("5441")),n=s.n(o),a=s("bd86"),c=s("ee53"),l=s("2f62"),u=s("fe51");function d(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function h(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?d(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):d(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var f={name:"CommonStoreList",props:[],components:{EmptyRecord:c["a"]},data:function(){return{sortkey:[{key:"",name:"综合排序",isMore:!0,id:0,child:[{key:"",name:"综合排序",isMore:!1,id:3},{key:"distance",name:"距离排序",isMore:!1,id:4}]},{key:"store_sales",name:"销量排序",isMore:!1,id:1},{key:"store_credit",name:"评分最高",isMore:!1,id:2}],currentSortKey:{},childSort:[],sort:{},isShowMore:!1,params:{brand:this.$route.query.brand?this.$route.query.brand:"",category:this.$route.query.storeclass_id?this.$route.query.storeclass_id:"",is_exchange:0,is_hot:0,activity:null,sort_key:this.$route.query.sort_key?this.$route.query.sort_key:"",sort_value:2,page:0,keyword:this.$route.query.keywords?this.$route.query.keywords:""},storeList:[],loading:!1,isMore:!0}},computed:h({},Object(l["d"])({member_point:function(t){return t.member.point},token:function(t){return t.member.token}})),created:function(){this.currentSortKey=this.sortkey[0],this.childSort=this.currentSortKey.child,this.sort=this.childSort[0]},methods:{closeFiler:function(){this.isShowMore=!1},isShowDroupMenu:function(){var t=this.currentSortKey;t.isMore?this.isShowMore=!0:this.isShowMore=!1},setActiveSortkey:function(t,e){this.currentSortKey=t,t.isMore?this.isShowMore=!this.isShowMore:(this.closeFiler(),this.getValue())},getValue:function(){var t=this,e=this.getSortValue(),s=e;this.params.page=1,this.storeList=[],this.loading=!1,this.setParamsByData(s),"distance"==e.sort_key?this.member_point?this.getStoreList(!1,!0):n.a.confirm("我们需要先获取您的位置信息","",{cancelButtonText:"拒绝",confirmButtonText:"同意"}).then((function(e){t.$router.push({name:"HomeMap"})})).catch((function(t){})):this.getStoreList()},getSortValue:function(){var t=this.currentSortKey,e={sort_key:"",sort_value:""};return t.isMore?e.sort_key=this.sort.key:e.sort_key=t.key,e},getSortChild:function(t){this.sort=t,this.isShowMore=!this.isShowMore,this.getValue()},getMore:function(){this.loading=!0,this.params.page=++this.params.page,this.isMore&&(this.loading=!1,this.getStoreList(!0))},getStoreList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.params;s?Object(u["f"])(i.brand,i.category,i.keyword,this.member_point.lng,this.member_point.lat,i.sort_key,i.page,this.token).then((function(s){t.buildData(e,s)})):Object(u["e"])(i.brand,i.category,i.keyword,0,0,i.sort_key,i.page,this.token).then((function(s){t.buildData(e,s)}))},buildData:function(t,e){e&&(this.storeList=t?this.storeList.concat(e.result.store_list):e.result.store_list,this.isMore=e.result.hasmore)},setParamsByData:function(t){var e=this.params;for(var s in e)for(var i in t)s===i&&(e[s]=t[i]);return e},goDetail:function(t){this.$router.push({name:"HomeStoredetail",query:{id:t}})}}},p=f,m=(s("a070"),s("2877")),v=Object(m["a"])(p,i,r,!1,null,"459004ea",null);e["default"]=v.exports},"2f21":function(t,e,s){"use strict";var i=s("79e5");t.exports=function(t,e){return!!t&&i((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"55dd":function(t,e,s){"use strict";var i=s("5ca1"),r=s("d8e8"),o=s("4bf8"),n=s("79e5"),a=[].sort,c=[1,2,3];i(i.P+i.F*(n((function(){c.sort(void 0)}))||!n((function(){c.sort(null)}))||!s("2f21")(a)),"Array",{sort:function(t){return void 0===t?a.call(o(this)):a.call(o(this),r(t))}})},"5d57":function(t,e,s){},a070:function(t,e,s){"use strict";var i=s("5d57"),r=s.n(i);r.a},ee53:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"common-empty-record"},[s("i",{staticClass:"iconfont"},[t._v("")]),s("p",[t._v("没有找到相关记录")])])}],o={name:"EmptyRecord",data:function(){return{}},props:{},methods:{}},n=o,a=s("2877"),c=Object(a["a"])(n,i,r,!1,null,null,null);e["a"]=c.exports}}]);