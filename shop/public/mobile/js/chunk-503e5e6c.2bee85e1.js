(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-503e5e6c"],{"02ab":function(e,s,d){"use strict";var a=d("5e9f"),t=d.n(a);t.a},"30d6":function(e,s,d){"use strict";var a=function(){var e=this,s=e.$createElement,d=e._self._c||s;return d("mt-popup",{attrs:{position:"bottom"},model:{value:e.currentValue,callback:function(s){e.currentValue=s},expression:"currentValue"}},[d("mt-picker",{ref:"picker",staticClass:"picker",attrs:{slots:e.buildItems,valueKey:"area_name",showToolbar:"",itemHeight:44},on:{change:e.onValuesChange}},[d("div",{staticClass:"toolbar"},[d("button",{staticClass:"toolbar-item cancel-item",on:{click:e.cancel}},[e._v("取消")]),d("div",{staticClass:"picker-header"},[e._v("请选择地区")]),d("button",{staticClass:"toolbar-item confirm-item",on:{click:e.confirm}},[e._v("确定")])])])],1)},t=[],r=(d("5fc6"),d("5af2")),i=d.n(r),n=d("366f"),o=function(){return Object(n["a"])("/Area/area_app","POST",{})},l={name:"RegionPicker",props:{modal:{default:!0},modalFade:{default:!1},lockScroll:{default:!1},closeOnClickModal:{default:!0}},data:function(){return{currentValue:!1,items:!1}},created:function(){var e=this;o().then((function(s){e.items=s.result.area_list})).catch((function(e){i()(e.message)}))},computed:{buildItems:function(){if(!this.items)return[];var e=new Array;return this.getDefaultItems(this.items,e),e}},methods:{getDefaultItems:function(e,s){if(e[0].child&&e[0].child.length>0){s&&0==s.length?(s.push({flex:1,values:e,textAlign:"center"}),this.getDefaultItems(e,s)):s&&s.length>0&&(s.push({flex:1,values:e[0].child,textAlign:"center"}),this.getDefaultItems(e[0].child,s))}},onValuesChange:function(e,s){e.setSlotValues(1,s[0]?s[0].child:[]),e.setSlotValues(2,s[1]?s[1].child:[]),e.setSlotValues(3,s[2]?s[2].child:[])},onclickMask:function(){this.currentValue=!1},cancel:function(){this.currentValue=!1},confirm:function(){this.currentValue=!1;var e=this.$refs.picker.getValues();this.$emit("onConfirm",e)}}},_=l,c=(d("c2dc"),d("2877")),u=Object(c["a"])(_,a,t,!1,null,"7f4d8173",null);s["a"]=u.exports},"484a":function(e,s,d){"use strict";d.r(s);var a=function(){var e=this,s=e.$createElement,d=e._self._c||s;return d("div",{staticClass:"container"},[d("div",{staticClass:"common-header-wrap"},[d("mt-header",{staticClass:"common-header",attrs:{title:e.getTitle}},[d("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:e.goBack},slot:"left"})],1)],1),d("mt-field",{attrs:{label:"姓名"},model:{value:e.address_info.address_realname,callback:function(s){e.$set(e.address_info,"address_realname",s)},expression:"address_info.address_realname"}}),d("mt-field",{attrs:{label:"手机"},model:{value:e.address_info.address_mob_phone,callback:function(s){e.$set(e.address_info,"address_mob_phone",s)},expression:"address_info.address_mob_phone"}}),d("mt-cell",{attrs:{title:"地区"}},[d("div",{on:{click:e.onRegion}},[d("span",[e._v(e._s(e.address_info.area_info))]),d("span",{staticClass:"iconfont right-arrow"},[e._v("")])])]),d("mt-field",{attrs:{label:"地址"},model:{value:e.address_info.address_detail,callback:function(s){e.$set(e.address_info,"address_detail",s)},expression:"address_info.address_detail"}}),d("mt-cell",{attrs:{title:"默认地址"}},[d("mt-switch",{model:{value:e.address_info.address_is_default,callback:function(s){e.$set(e.address_info,"address_is_default",s)},expression:"address_info.address_is_default"}})],1),d("mt-button",{staticClass:"ds-button-large mt-10",attrs:{type:"primary"},on:{click:e.submit}},[e._v(e._s(e.getSumitTitle))]),d("region-picker",{ref:"picker",on:{onConfirm:e.onPickerConfirm}})],1)},t=[],r=(d("ceaa"),d("b2fb")),i=d.n(r),n=(d("5fc6"),d("5af2")),o=d.n(n),l=d("3aa4"),_=d("30d6"),c=(d("b20a"),d("4969")),u={components:{RegionPicker:_["a"]},computed:{isAddMode:function(){var e=this.$route.query.action;return"add"===e},getTitle:function(){return this.isAddMode?"新增地址":"修改收货地址"},getSumitTitle:function(){var e=this.$route.query.isFromCheckout;return e?"保存并使用":"保存"}},data:function(){return{popMap:!1,address_id:0,address_info:{address_realname:"",address_mob_phone:"",address_detail:"",address_is_default:!0,area_info:"请选择地区",city_id:0,area_id:0,address_longitude:0,address_latitude:0}}},created:function(){var e=this;this.isAddMode||(this.address_id=this.$route.query.address_id,Object(c["d"])(this.address_id).then((function(s){e.address_info.address_realname=s.result.address_info.address_realname,e.address_info.address_mob_phone=s.result.address_info.address_mob_phone,e.address_info.address_detail=s.result.address_info.address_detail,e.address_info.area_info=s.result.address_info.area_info,e.address_info.city_id=s.result.address_info.city_id,e.address_info.area_id=s.result.address_info.area_id,e.address_info.address_longitude=s.result.address_info.address_longitude,e.address_info.address_latitude=s.result.address_info.address_latitude,"1"===s.result.address_info.address_is_default?e.address_info.address_is_default=!0:e.address_info.address_is_default=!1})).catch((function(e){o()(e.message)})))},methods:{goBack:function(){this.$router.go(-1)},getPosition:function(){var e=this;Object(l["c"])(this.address_info.area_info+this.address_info.address_detail).then((function(s){s.result.location&&(e.address_info.address_longitude=s.result.location.lng,e.address_info.address_latitude=s.result.location.lat)})).catch((function(e){o()(e.message)}))},setPosition:function(e,s,d){this.popMap=!1,this.address_info.address_detail=d,this.address_info.address_longitude=s,this.address_info.address_latitude=e},submit:function(){var e=this;""!==this.address_info.address_realname&&0!==this.address_info.address_realname.length?this.address_info.address_realname.length<2||this.address_info.address_realname.length>15?o()("2-15个字符限制"):""!==this.address_info.address_mob_phone&&0!==this.address_info.address_mob_phone.length?0!==this.address_info.area_id&&void 0!==this.address_info.area_id?""!==this.address_info.address_detail?(0===this.address_info.address_detail.length&&o()("请填写详细地址"),0===this.address_info.address_longitude||this.address_info.address_latitude,this.isAddMode?(i.a.open(),Object(c["a"])(this.address_info).then((function(s){i.a.close(),e.updateSelectedAddress()}),(function(e){i.a.close(),o()(e.message)}))):(i.a.open(),Object(c["c"])(this.address_info,this.address_id).then((function(s){i.a.close(),e.updateSelectedAddress()}),(function(e){i.a.close(),o()(e.message)})))):o()("请填写详细地址"):o()("请选择所在地区"):o()("请填写手机号码"):o()("请填写收件人姓名")},onRegion:function(e,s){this.$refs.picker.currentValue=!0},onPickerConfirm:function(e){this.address_info.area_info=this.getRegionStr(e),this.address_info.area_id=e[2].area_id,this.address_info.city_id=e[1].area_id},getRegionStr:function(e){for(var s="",d=0;d<e.length;d++){var a=e[d];0!==d?s=s+" "+a.area_name:s+=a.area_name}return s},updateSelectedAddress:function(){var e=this.$route.query.isFromCheckout,s=this.$route.query.goBackLevel?this.$route.query.goBackLevel:-1;e?this.$router.go(s):this.goBack()}}},f=u,h=(d("02ab"),d("2877")),m=Object(h["a"])(f,a,t,!1,null,"0f5e71d2",null);s["default"]=m.exports},4969:function(e,s,d){"use strict";d.d(s,"e",(function(){return t})),d.d(s,"d",(function(){return r})),d.d(s,"a",(function(){return i})),d.d(s,"c",(function(){return n})),d.d(s,"b",(function(){return o}));var a=d("366f"),t=function(){return Object(a["a"])("/Memberaddress/address_list","POST",{},"member")},r=function(e){return Object(a["a"])("/Memberaddress/address_info","POST",{address_id:e},"member")},i=function(e){return Object(a["a"])("/Memberaddress/address_add","POST",{address_realname:e.address_realname,area_id:e.area_id,city_id:e.city_id,area_info:e.area_info,address_detail:e.address_detail,address_longitude:e.address_longitude,address_latitude:e.address_latitude,address_tel_phone:e.address_tel_phone,address_mob_phone:e.address_mob_phone,address_is_default:e.address_is_default},"member")},n=function(e,s){return Object(a["a"])("/Memberaddress/address_edit","POST",{address_id:s,address_realname:e.address_realname,area_id:e.area_id,city_id:e.city_id,area_info:e.area_info,address_detail:e.address_detail,address_longitude:e.address_longitude,address_latitude:e.address_latitude,address_tel_phone:e.address_tel_phone,address_mob_phone:e.address_mob_phone,address_is_default:e.address_is_default},"member")},o=function(e){return Object(a["a"])("/Memberaddress/address_del","POST",{address_id:e},"member")}},"5e9f":function(e,s,d){},c2dc:function(e,s,d){"use strict";var a=d("eb38"),t=d.n(a);t.a},eb38:function(e,s,d){}}]);