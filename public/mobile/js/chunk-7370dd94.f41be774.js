(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7370dd94","chunk-ddafed1c","chunk-6a821cb6","chunk-7ed9b93d"],{"1c40":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container",on:{click:t.onclick}},[s("label",{staticClass:"title"},[t._v(t._s(t.title))]),t.isShowTips?s("label",{staticClass:"tips"},[t._v(t._s(t.tips))]):t._e(),s("label",{staticClass:"subtitle"},[t._v(t._s(t.subtitle))]),s("i",{staticClass:"indicator iconfont"},[t._v("")])])},o=[],n={props:{title:{type:String},subtitle:{type:String},tips:{type:String}},computed:{isShowTips:function(){return!(!this.tips||!this.tips.length)}},methods:{onclick:function(){this.$emit("onclick")}}},a=n,r=(s("cdf9"),s("2877")),c=Object(r["a"])(a,i,o,!1,null,"1405f135",null);e["default"]=c.exports},"2c82":function(t,e,s){},5242:function(t,e,s){},"534d":function(t,e,s){},"5af2":function(t,e,s){t.exports=function(t){var e={};function s(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=t,s.c=e,s.i=function(t){return t},s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=242)}({0:function(t,e){t.exports=function(t,e,s,i,o){var n,a=t=t||{},r=typeof t.default;"object"!==r&&"function"!==r||(n=t,a=t.default);var c,u="function"===typeof a?a.options:a;if(e&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns),i&&(u._scopeId=i),o?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},u._ssrRegister=c):s&&(c=s),c){var l=u.functional,d=l?u.render:u.beforeCreate;l?u.render=function(t,e){return c.call(e),d(t,e)}:u.beforeCreate=d?[].concat(d,c):[c]}return{esModule:n,exports:a,options:u}}},1:function(t,e){t.exports=s("2b0e")},101:function(t,e){},164:function(t,e,s){function i(t){s(101)}var o=s(0)(s(86),s(170),i,null,null);t.exports=o.exports},170:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"mint-toast-pop"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"mint-toast",class:t.customClass,style:{padding:""===t.iconClass?"10px":"20px"}},[""!==t.iconClass?s("i",{staticClass:"mint-toast-icon",class:t.iconClass}):t._e(),t._v(" "),s("span",{staticClass:"mint-toast-text",style:{"padding-top":""===t.iconClass?"0":"10px"}},[t._v(t._s(t.message))])])])},staticRenderFns:[]}},242:function(t,e,s){t.exports=s(50)},50:function(t,e,s){"use strict";var i=s(94);Object.defineProperty(e,"__esModule",{value:!0}),s.d(e,"default",(function(){return i["a"]}))},86:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={props:{message:String,className:{type:String,default:""},position:{type:String,default:"middle"},iconClass:{type:String,default:""}},data:function(){return{visible:!1}},computed:{customClass:function(){var t=[];switch(this.position){case"top":t.push("is-placetop");break;case"bottom":t.push("is-placebottom");break;default:t.push("is-placemiddle")}return t.push(this.className),t.join(" ")}}}},94:function(t,e,s){"use strict";var i=s(1),o=s.n(i),n=o.a.extend(s(164)),a=[],r=function(){if(a.length>0){var t=a[0];return a.splice(0,1),t}return new n({el:document.createElement("div")})},c=function(t){t&&a.push(t)},u=function(t){t.target.parentNode&&t.target.parentNode.removeChild(t.target)};n.prototype.close=function(){this.visible=!1,this.$el.addEventListener("transitionend",u),this.closed=!0,c(this)};var l=function(t){void 0===t&&(t={});var e=t.duration||3e3,s=r();return s.closed=!1,clearTimeout(s.timer),s.message="string"===typeof t?t:t.message,s.position=t.position||"middle",s.className=t.className||"",s.iconClass=t.iconClass||"",document.body.appendChild(s.$el),o.a.nextTick((function(){s.visible=!0,s.$el.removeEventListener("transitionend",u),~e&&(s.timer=setTimeout((function(){s.closed||s.close()}),e))})),s};e["a"]=l}})},"5dbb":function(t,e,s){"use strict";var i=s("2c82"),o=s.n(i);o.a},"5fc6":function(t,e,s){},"925a":function(t,e,s){"use strict";var i=s("5242"),o=s.n(i);o.a},"95fd":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"common-header-wrap"},[s("mt-header",{staticClass:"common-header",attrs:{title:"确认订单"}},[s("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:function(e){return t.$router.go(-1)}},slot:"left"})],1)],1),t.store_final_total_list?s("div",{staticClass:"body"},[s("mt-field",{attrs:{label:"手机号",placeholder:"请填写手机号",type:"text"},model:{value:t.buyer_phone,callback:function(e){t.buyer_phone=e},expression:"buyer_phone"}}),s("checkout-store",{staticClass:"section-header",attrs:{storeCartList:t.store_final_total_list.goods_info},on:{selectVoucher:t.selectVoucher,changeMessage:t.changeMessage}})],1):t._e(),t.store_final_total_list?s("div",{staticClass:"bottom-wrapper"},[s("div",{staticClass:"amount-wrapper"},[t.store_final_total_list?s("label",{staticClass:"amount ml-5"},[t.store_final_total_list.member_info.available_predeposit>0?s("mt-switch",{model:{value:t.pd_pay,callback:function(e){t.pd_pay=e},expression:"pd_pay"}},[t._v("预存款")]):t._e(),t.store_final_total_list.member_info.available_rc_balance>0?s("mt-switch",{model:{value:t.rcb_pay,callback:function(e){t.rcb_pay=e},expression:"rcb_pay"}},[t._v("充值卡")]):t._e()],1):t._e(),s("mt-button",{attrs:{size:"small",type:"danger"},on:{click:t.checkout}},[t._v("提交订单")])],1)]):t._e()])},o=[],n=(s("b6ce"),s("5441")),a=s.n(n),r=(s("5fc6"),s("5af2")),c=s.n(r),u=s("a791"),l=s("1c40"),d=s("c5a7"),_={name:"Step1",components:{CheckoutItem:l["default"],CheckoutStore:d["default"]},data:function(){return{goods_id:this.$route.query.goods_id?this.$route.query.goods_id:"",quantity:this.$route.query.quantity?this.$route.query.quantity:"",buyer_phone:"",store_final_total_list:null,pd_pay:!1,rcb_pay:!1,password:"",message:""}},created:function(){this.getBuyInfo()},methods:{getBuyInfo:function(){var t=this,e={};this.$route.query.pintuan_id&&(e["pintuan_id"]=this.$route.query.pintuan_id,e["pintuangroup_id"]=this.$route.query.pintuangroup_id),Object(u["a"])(this.goods_id,this.quantity,e).then((function(e){1e4===e.code&&(t.store_final_total_list=e.result)})).catch((function(t){c()(t.message)}))},goBack:function(){this.$router.go(-1)},selectVoucher:function(t){this.store_final_total_list.goods_info.store_voucher_info=t},goAddress:function(){this.store_final_total_list.address_info?this.$router.push({name:"MemberAddressList"}):this.$router.push({name:"MemberAddressForm",query:{action:"add",isFromCheckout:!0,goBackLevel:-1}})},changeMessage:function(t,e){this.message=t},checkout:function(){var t=this,e=this.goods_id,s=this.quantity,i=this.buyer_phone,o=this.message,n=this.pd_pay?1:0,r=this.password,l=this.rcb_pay?1:0;if(i){if(n||l){if(!this.store_final_total_list.member_info.member_paypwd)return void a.a.confirm("您需要先去设置支付密码","").then((function(e){t.$router.push({name:"MemberSetting"})}));if(!r)return void a.a.prompt("请输入支付密码","",{showCancelButton:!0,inputType:"password"}).then((function(e){var s=e.value;e.action;t.password=s,t.checkout()}))}var d={};this.$route.query.pintuan_id&&(d["pintuan_id"]=this.$route.query.pintuan_id,d["pintuangroup_id"]=this.$route.query.pintuangroup_id);var _=this.store_final_total_list.goods_info.store_voucher_info.vouchertemplate_id+"|"+this.store_final_total_list.goods_info.store_id+"|"+this.store_final_total_list.goods_info.store_voucher_info.voucher_price;d["voucher"]=_,Object(u["b"])(e,s,i,o,n,r,l,d).then((function(e){var s=e.result.order_sn;t.$router.push({name:"MemberBuyPay",query:{pay_sn:s,pay_type:"vr_pay_new"}})})).catch((function(t){c()(t.message)}))}else a.a.alert("您需要先去填写手机号","")}}},p=_,f=(s("5dbb"),s("2877")),h=Object(f["a"])(p,i,o,!1,null,"ef7d60e8",null);e["default"]=h.exports},a791:function(t,e,s){"use strict";s.d(e,"a",(function(){return o})),s.d(e,"b",(function(){return n})),s.d(e,"c",(function(){return a}));var i=s("366f"),o=function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(i["a"])("/membervrbuy/buy_step1","POST",Object.assign({goods_id:t,quantity:e},s),"member")},n=function(t,e,s,o,n,a,r){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};return Object(i["a"])("/membervrbuy/buy_step2","POST",Object.assign({goods_id:t,quantity:e,buyer_phone:s,buyer_msg:o,pd_pay:n,password:a,rcb_pay:r},c),"member")},a=function(t){return Object(i["a"])("/membervrbuy/pay","POST",{pay_sn:t},"member")}},b71d:function(t,e,s){"use strict";var i=s("e7d7"),o=s.n(i);o.a},c5a7:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[s("div",{staticClass:"store"},[s("i",{staticClass:"iconfont"},[t._v("")]),s("span",[t._v(t._s(t.storeCartList.store_name))])]),s("ul",{staticClass:"cart-item"},[s("li",{staticClass:"buy-item"},[s("div",{staticClass:"goods-pic"},[s("img",{attrs:{src:t.storeCartList.goods_image_url}})]),s("div",{staticClass:"goods-info"},[s("dl",[s("dt",{staticClass:"goods-name"},[s("a",[t._v(t._s(t.storeCartList.goods_name))])]),s("dd",{staticClass:"goods-type"}),s("dd",{staticClass:"goods-subtotal"},[s("span",{staticClass:"goods-price"},[t._v(t._s(t.storeCartList.goods_price))]),s("span",{staticClass:"goods-count"},[t._v("×"+t._s(t.storeCartList.quantity))])])])])])]),s("div",{staticClass:"cart-subtotal"},[s("div",{staticClass:"message"},[s("mt-field",{attrs:{label:"备注",placeholder:"店铺订单留言:",type:"textarea"},on:{change:function(e){return t.changeMessage()}},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1),t.storeCartList.store_voucher_list.length?s("div",{on:{click:function(e){t.voucherVisible=!0}}},[s("mt-cell",{staticClass:"menu-item",attrs:{title:"代金券"}},[s("span",{staticClass:"left-icon iconfont",attrs:{slot:"icon"},slot:"icon"},[t._v("")]),t._v(t._s(t.myVoucher)),s("i",{staticClass:"indicator iconfont"},[t._v("")])])],1):t._e(),s("checkout-desc",{staticClass:"desc-item",attrs:{title:"本店合计",subtitle:t.totalAmount}})],1),s("mt-popup",{staticClass:"common-popup-wrapper",attrs:{position:"right"},model:{value:t.voucherVisible,callback:function(e){t.voucherVisible=e},expression:"voucherVisible"}},[s("div",{staticClass:"common-header-wrap"},[s("mt-header",{staticClass:"common-header",attrs:{title:"代金券"}},[s("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:function(e){t.voucherVisible=!1}},slot:"left"}),s("mt-button",{attrs:{slot:"right"},on:{click:function(e){return t.selectVoucher("")}},slot:"right"},[t._v("不使用")])],1)],1),s("div",{staticClass:"common-popup-content"},t._l(t.storeCartList.store_voucher_list,(function(e,i){return s("div",{key:e.voucher_id,staticClass:"common-voucher common-voucher02",class:1!=e.voucher_state?"disable":"",on:{click:function(s){return t.selectVoucher(e)}}},[s("div",{staticClass:"par"},[s("p",[t._v("订单满"+t._s(e.voucher_limit)+"元")]),s("sub",{staticClass:"sign"},[t._v("￥")]),s("span",[t._v(t._s(e.voucher_price))])]),s("div",{staticClass:"copy"},[t._v("有效期至"),s("p",[s("br"),t._v(t._s(t.$moment.unix(e.voucher_enddate).format("YYYY.MM.DD")))])]),s("i")])})),0)])],1)])},o=[],n=s("bd86"),a=s("df4d"),r={name:"CheckoutStore",data:function(){return Object(n["a"])({totalAmount:"",voucherVisible:[],message:"",myVoucher:""},"voucherVisible",!1)},components:{CheckoutDesc:a["default"]},props:["storeCartList"],created:function(){this.calcOrder()},methods:{changeMessage:function(){this.$emit("changeMessage",this.message)},selectVoucher:function(t){this.voucherVisible=!1,this.$emit("selectVoucher",t),this.storeCartList.store_voucher_info=t,this.calcOrder()},calcOrder:function(){var t=parseFloat(this.storeCartList.goods_total);this.storeCartList.store_voucher_list.length&&(this.storeCartList.store_voucher_info?(t-=parseFloat(this.storeCartList.store_voucher_info.voucher_price),this.myVoucher=this.storeCartList.store_voucher_info.voucher_price+"元"):this.myVoucher="不使用"),t<0&&(t=0),this.totalAmount=t}}},c=r,u=(s("b71d"),s("2877")),l=Object(u["a"])(c,i,o,!1,null,"a08a9ea0",null);e["default"]=l.exports},cdf9:function(t,e,s){"use strict";var i=s("534d"),o=s.n(i);o.a},df4d:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("label",{staticClass:"title"},[t._v(t._s(t.title))]),s("label",{staticClass:"subtitle"},[t._v("￥"+t._s(t.subtitle))])])},o=[],n={props:{title:{},subtitle:{}}},a=n,r=(s("925a"),s("2877")),c=Object(r["a"])(a,i,o,!1,null,"65179caf",null);e["default"]=c.exports},e7d7:function(t,e,s){}}]);