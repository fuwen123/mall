(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d70eb38a"],{"2a92":function(t,e,i){},"3b71":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{staticClass:"common-header-wrap"},[i("mt-header",{staticClass:"common-header",attrs:{title:"投诉详情"}},[i("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:function(e){return t.$router.go(-1)}},slot:"left"})],1)],1),t.complain_id?i("div",[i("div",[i("mt-cell",{staticClass:"menu-item",attrs:{title:"投诉信息"}}),i("div",{staticClass:"menu-content"},[i("mt-cell",{attrs:{title:"投诉人",value:t.complaint.accused_name}}),i("mt-cell",{attrs:{title:"投诉主题",value:t.complaint.complain_subject_content}}),i("mt-cell",{attrs:{title:"投诉时间",value:t.$moment.unix(t.complaint.complain_datetime).format("YYYY.MM.DD")}}),i("mt-cell",{attrs:{title:"投诉内容",value:t.complaint.complain_content}}),t.complain_pic.length?i("div",{on:{click:function(e){t.isshow=!0}}},[i("mt-cell",{attrs:{title:"投诉凭证",value:"查看"}})],1):t._e()],1),t.complain_pic.length>0?i("mt-popup",{attrs:{"popup-transition":"popup-fade"},model:{value:t.isshow,callback:function(e){t.isshow=e},expression:"isshow"}},[i("div",{staticClass:"preview-picture"},[i("div",{staticClass:"picture-header",on:{click:function(e){t.isshow=!1}}},[i("span",[t._v("关闭")]),t.complain_pic?i("span",[t._v(t._s(t.defaultindex+1)+" / "+t._s(t.complain_pic.length))]):t._e()]),i("div",{staticClass:"picture-body"},[i("mt-swipe",{staticClass:"ui-common-swiper",attrs:{auto:0,"show-indicators":!0,"default-index":t.defaultindex,prevent:!1,"stop-propagation":!0},on:{change:t.handleChange}},t._l(t.complain_pic,(function(t,e){return i("mt-swipe-item",{key:e},[i("img",{attrs:{src:t}})])})),1)],1)])]):t._e()],1),t.complaint.complain_state>20?i("div",[i("mt-cell",{staticClass:"menu-item",attrs:{title:"申诉信息"}}),i("div",{staticClass:"menu-content"},[i("mt-cell",{attrs:{title:"申诉时间",value:t.$moment.unix(t.complaint.appeal_datetime).format("YYYY.MM.DD")}}),i("mt-cell",{attrs:{title:"申诉内容",value:t.complaint.complain_appeal_content}}),t.appeal_pic.length?i("div",{on:{click:function(e){t.isshow2=!0}}},[i("mt-cell",{attrs:{title:"申诉凭证",value:"查看"}})],1):t._e()],1),t.appeal_pic.length>0?i("mt-popup",{attrs:{"popup-transition":"popup-fade"},model:{value:t.isshow2,callback:function(e){t.isshow2=e},expression:"isshow2"}},[i("div",{staticClass:"preview-picture"},[i("div",{staticClass:"picture-header",on:{click:function(e){t.isshow2=!1}}},[i("span",[t._v("关闭")]),t.appeal_pic?i("span",[t._v(t._s(t.defaultindex2+1)+" / "+t._s(t.appeal_pic.length))]):t._e()]),i("div",{staticClass:"picture-body"},[i("mt-swipe",{staticClass:"ui-common-swiper",attrs:{auto:0,"show-indicators":!0,"default-index":t.defaultindex2,prevent:!1,"stop-propagation":!0},on:{change:t.handleChange2}},t._l(t.appeal_pic,(function(t,e){return i("mt-swipe-item",{key:e},[i("img",{attrs:{src:t}})])})),1)],1)])]):t._e()],1):t._e(),i("div",{staticClass:"body"},[i("mt-cell",{staticClass:"menu-item",attrs:{title:"对话记录"}}),t._l(t.talk_list,(function(t){return i("mt-cell",{attrs:{title:t.talk}})}))],2),t.complaint.complain_state>20&&t.complaint.complain_state<99?i("div",[i("div",{staticClass:"body"},[i("div",{staticClass:"order-comment-body"},[i("div",{staticClass:"enter"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{placeholder:"对话内容"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})])])]),i("mt-button",{staticClass:"ds-button-large",attrs:{type:"primary"},on:{click:t.addComplaintTalk}},[t._v("提交")])],1):t._e()]):i("div",[i("div",{staticClass:"body"},[i("div",{on:{click:function(e){t.subjectVisible=!0}}},[i("mt-cell",{attrs:{title:"投诉主题","is-link":"",value:t.subject_name}})],1),i("mt-cell",{staticClass:"menu-item",attrs:{title:"投诉凭证"}}),i("div",{staticClass:"image-wrapper"},[i("div",{ref:"upload_btn1",staticClass:"user-avatar iconfont icon-xiangji",on:{change:function(e){return t.uploadComplaintPic(0,e)}}},[t.image[0]?i("img",{attrs:{src:t.image[0]}}):t._e(),i("input",{attrs:{type:"file",accept:"image/jpg,image/png,image/gif,image/bmp,image/jpeg"}})]),i("div",{ref:"upload_btn2",staticClass:"user-avatar iconfont icon-xiangji",on:{change:function(e){return t.uploadComplaintPic(1,e)}}},[t.image[1]?i("img",{attrs:{src:t.image[1]}}):t._e(),i("input",{attrs:{type:"file",accept:"image/jpg,image/png,image/gif,image/bmp,image/jpeg"}})]),i("div",{ref:"upload_btn3",staticClass:"user-avatar iconfont icon-xiangji",on:{change:function(e){return t.uploadComplaintPic(2,e)}}},[t.image[2]?i("img",{attrs:{src:t.image[2]}}):t._e(),i("input",{attrs:{type:"file",accept:"image/jpg,image/png,image/gif,image/bmp,image/jpeg"}})])]),i("div",{staticClass:"order-comment-body"},[i("div",{staticClass:"enter"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{placeholder:"投诉内容"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})])])],1),i("mt-button",{staticClass:"ds-button-large",attrs:{type:"primary"},on:{click:t.addComplaint}},[t._v("提交")]),i("mt-popup",{staticClass:"common-popup-wrapper",attrs:{position:"right"},model:{value:t.subjectVisible,callback:function(e){t.subjectVisible=e},expression:"subjectVisible"}},[i("div",{staticClass:"common-header-wrap"},[i("mt-header",{staticClass:"common-header",attrs:{title:"投诉主题"}},[i("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:function(e){t.subjectVisible=!1}},slot:"left"})],1)],1),i("div",{staticClass:"common-popup-content"},[i("mt-radio",{attrs:{options:t.subject_options},model:{value:t.subject,callback:function(e){t.subject=e},expression:"subject"}})],1)])],1)])},a=[],s=(i("28a5"),i("5fc6"),i("5af2")),o=i.n(s),c=i("aaa5"),l={data:function(){return{content:"",complain_id:this.$route.query.complain_id,order_id:this.$route.query.order_id,goods_id:this.$route.query.goods_id,subjectVisible:!1,subject_options:[],subject_name:"",subject:"",image:["","",""],file_value:["","",""],complaint:{},complain_pic:[],appeal_pic:[],isshow:!1,isshow2:!1,defaultindex:0,defaultindex2:0,talk_list:[]}},created:function(){var t=this;this.complain_id?(Object(c["g"])(this.complain_id).then((function(e){t.talk_list=e.result.talk_list})).catch((function(t){o()(t.message)})),Object(c["e"])(this.complain_id).then((function(e){t.complaint=e.result.complain_info,t.complain_pic=e.result.complain_pic,t.appeal_pic=e.result.appeal_pic})).catch((function(t){o()(t.message)}))):Object(c["d"])(this.order_id,this.goods_id).then((function(e){var i=e.result.subject_list;for(var n in i)t.subject_options.push({label:i[n].complainsubject_content,value:i[n].complainsubject_id+","+i[n].complainsubject_content});t.subject=i[0].complainsubject_id+","+i[0].complainsubject_content})).catch((function(t){o()(t.message),this.$router.go(-1)}))},watch:{subject:function(t){var e=t.split(",");this.subject_name=e[1],this.subjectVisible=!1}},methods:{handleChange:function(t){this.defaultindex=t},handleChange2:function(t){this.defaultindex2=t},addComplaintTalk:function(){var t=this;Object(c["b"])(this.complain_id,this.content).then((function(e){t.$router.go(0)})).catch((function(t){o()(t.message)}))},addComplaint:function(){var t=this;Object(c["a"])(this.order_id,this.goods_id,this.subject,this.content,this.file_value).then((function(e){t.$router.push({name:"MemberComplaintList"})})).catch((function(t){o()(t.message)}))},uploadComplaintPic:function(t,e){var i=this;if("undefined"!==typeof e.target.files[0]){var n=new FormData;n.append("complain_pic",e.target.files[0]),Object(c["i"])(n).then((function(e){i.image.splice(t,1,e.result.pic+"?"+Math.floor(100*Math.random())),i.file_value.splice(t,1,e.result.file_name)})).catch((function(t){o()(t.message)}))}}}},r=l,u=(i("470b"),i("acfb"),i("2877")),p=Object(u["a"])(r,n,a,!1,null,"0938c1b8",null);e["default"]=p.exports},"470b":function(t,e,i){"use strict";var n=i("ee1b"),a=i.n(n);a.a},"5af2":function(t,e,i){t.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.i=function(t){return t},i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=242)}({0:function(t,e){t.exports=function(t,e,i,n,a){var s,o=t=t||{},c=typeof t.default;"object"!==c&&"function"!==c||(s=t,o=t.default);var l,r="function"===typeof o?o.options:o;if(e&&(r.render=e.render,r.staticRenderFns=e.staticRenderFns),n&&(r._scopeId=n),a?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},r._ssrRegister=l):i&&(l=i),l){var u=r.functional,p=u?r.render:r.beforeCreate;u?r.render=function(t,e){return l.call(e),p(t,e)}:r.beforeCreate=p?[].concat(p,l):[l]}return{esModule:s,exports:o,options:r}}},1:function(t,e){t.exports=i("2b0e")},101:function(t,e){},164:function(t,e,i){function n(t){i(101)}var a=i(0)(i(86),i(170),n,null,null);t.exports=a.exports},170:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"mint-toast-pop"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"mint-toast",class:t.customClass,style:{padding:""===t.iconClass?"10px":"20px"}},[""!==t.iconClass?i("i",{staticClass:"mint-toast-icon",class:t.iconClass}):t._e(),t._v(" "),i("span",{staticClass:"mint-toast-text",style:{"padding-top":""===t.iconClass?"0":"10px"}},[t._v(t._s(t.message))])])])},staticRenderFns:[]}},242:function(t,e,i){t.exports=i(50)},50:function(t,e,i){"use strict";var n=i(94);Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"default",(function(){return n["a"]}))},86:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={props:{message:String,className:{type:String,default:""},position:{type:String,default:"middle"},iconClass:{type:String,default:""}},data:function(){return{visible:!1}},computed:{customClass:function(){var t=[];switch(this.position){case"top":t.push("is-placetop");break;case"bottom":t.push("is-placebottom");break;default:t.push("is-placemiddle")}return t.push(this.className),t.join(" ")}}}},94:function(t,e,i){"use strict";var n=i(1),a=i.n(n),s=a.a.extend(i(164)),o=[],c=function(){if(o.length>0){var t=o[0];return o.splice(0,1),t}return new s({el:document.createElement("div")})},l=function(t){t&&o.push(t)},r=function(t){t.target.parentNode&&t.target.parentNode.removeChild(t.target)};s.prototype.close=function(){this.visible=!1,this.$el.addEventListener("transitionend",r),this.closed=!0,l(this)};var u=function(t){void 0===t&&(t={});var e=t.duration||3e3,i=c();return i.closed=!1,clearTimeout(i.timer),i.message="string"===typeof t?t:t.message,i.position=t.position||"middle",i.className=t.className||"",i.iconClass=t.iconClass||"",document.body.appendChild(i.$el),a.a.nextTick((function(){i.visible=!0,i.$el.removeEventListener("transitionend",r),~e&&(i.timer=setTimeout((function(){i.closed||i.close()}),e))})),i};e["a"]=u}})},"5fc6":function(t,e,i){},aaa5:function(t,e,i){"use strict";i.d(e,"f",(function(){return a})),i.d(e,"a",(function(){return s})),i.d(e,"c",(function(){return o})),i.d(e,"i",(function(){return c})),i.d(e,"d",(function(){return l})),i.d(e,"e",(function(){return r})),i.d(e,"b",(function(){return u})),i.d(e,"g",(function(){return p})),i.d(e,"h",(function(){return m}));var n=i("366f"),a=function(t){return Object(n["a"])("/membercomplain/index","POST",{page:t.page,per_page:t.per_page},"member")},s=function(t,e,i,a,s){return Object(n["a"])("/membercomplain/complain_save","POST",{input_order_id:t,input_goods_id:e,input_complain_subject:i,input_complain_content:a,pic_name:s},"member")},o=function(t){return Object(n["a"])("/membercomplain/complain_cancel","POST",{complain_id:t},"member")},c=function(t){return Object(n["a"])("/membercomplain/upload_pic","POST",t,"member",!0)},l=function(t,e){return Object(n["a"])("/membercomplain/get_common_data","POST",{order_id:t,goods_id:e},"member")},r=function(t){return Object(n["a"])("/membercomplain/complain_show","POST",{complain_id:t},"member")},u=function(t,e){return Object(n["a"])("/membercomplain/publish_complain_talk","POST",{complain_id:t,complain_talk:e},"member")},p=function(t){return Object(n["a"])("/membercomplain/get_complain_talk","POST",{complain_id:t},"member")},m=function(t){return Object(n["a"])("/membercomplain/apply_handle","POST",{input_complain_id:t},"member")}},acfb:function(t,e,i){"use strict";var n=i("2a92"),a=i.n(n);a.a},ee1b:function(t,e,i){}}]);