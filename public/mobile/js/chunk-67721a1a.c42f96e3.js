(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67721a1a"],{"00cd":function(t,e,i){},"2f21":function(t,e,i){"use strict";var n=i("79e5");t.exports=function(t,e){return!!t&&n((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"440a":function(t,e,i){"use strict";var n=i("8382"),o=i.n(n);o.a},"55dd":function(t,e,i){"use strict";var n=i("5ca1"),o=i("d8e8"),a=i("4bf8"),r=i("79e5"),s=[].sort,d=[1,2,3];n(n.P+n.F*(r((function(){d.sort(void 0)}))||!r((function(){d.sort(null)}))||!i("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(a(this)):s.call(a(this),o(t))}})},"76a7":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t.detailInfo?n("mt-popup",{attrs:{position:"bottom","close-on-click-modal":!1},model:{value:t.isShowcartInfo,callback:function(e){t.isShowcartInfo=e},expression:"isShowcartInfo"}},[t.detailInfo?n("div",{staticClass:"ui-add-shopping"},[n("div",{staticClass:"shopping-info"},[n("div",{staticClass:"info-header"},[!t.detailInfo.photos||t.detailInfo.photos.length<=0?n("img",{staticClass:"info-image",attrs:{src:i("073b")}}):t._e(),t.detailInfo.photos&&t.detailInfo.photos.length>0?n("img",{staticClass:"info-image",attrs:{src:t.detailInfo.photos[0]}}):t._e(),n("div",[n("span",{staticClass:"header-price"},[t._v("￥"+t._s(t.propertiPrice))]),n("span",[t.detailInfo.activity?n("span",{staticClass:"iconfont"},[t._v("")]):t._e(),t.detailInfo.activity?n("span",[t._v(t._s(t.detailInfo.activity.name))]):t._e()]),n("span",[t._v("库存"+t._s(t.currentStock)+"件")]),n("span",[t._v("数量："+t._s(t.numbers))])]),n("span",{staticClass:"iconfont close",on:{click:function(e){return t.closeCartInfo(!1)}}},[t._v("")])]),n("div",{staticClass:"goods-detail-properties"},[t._l(t.detailInfo.spec_name,(function(e,i){return t.detailInfo&&t.detailInfo.goods_spec?n("div",{key:i,staticClass:"goods-properties"},[n("p",[t._v(t._s(e))]),n("div",{staticClass:"properties-list"},t._l(t.detailInfo.spec_value[i],(function(e,o){return n("div",{key:o},[n("span",{class:{"active-properties":t.detailInfo.goods_spec[o]},on:{click:function(e){return t.setCurrentIndex(o,t.detailInfo.spec_value[i])}}},[t._v(t._s(e))])])})),0)]):t._e()})),n("div",{staticClass:"info-body",attrs:{id:"info-body"}},[n("p",[t._v("数量")]),n("div",{staticClass:"ui-number"},[n("div",{staticClass:"reduce ui-common",class:{"reduce-opacity":t.numbers<=1},on:{click:function(e){return e.stopPropagation(),t.reduceNumber()}}},[t._v("\r\n\t\t\t\t\t\t\t\t-\r\n\t\t\t\t\t\t\t")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.numbers,expression:"numbers"}],staticClass:"number",attrs:{type:"number",min:"1",value:"1",readonly:"true"},domProps:{value:t.numbers},on:{input:function(e){e.target.composing||(t.numbers=e.target.value)}}}),n("div",{staticClass:"add ui-common",on:{click:function(e){return e.stopPropagation(),t.addNumber()}}},[t._v("+")])])])],2),n("div",{staticClass:"info-footer"},[!t.detailInfo.bargain_info&&(!t.detailInfo.pintuan_type&&t.detailInfo.cart||t.detailInfo.pintuan_type&&t.detailInfo.pintuangroup_list.length)?n("div",{staticClass:"footer-button active-cart",on:{click:function(e){return t.checkProduct(!1)}}},[t._v("\r\n\t\t\t\t\t\t"+t._s(t.addCartText)+"\r\n\t\t\t\t\t")]):t._e(),n("div",{staticClass:"footer-button active-buy",on:{click:function(e){return t.checkProduct(!0)}}},[t._v("\r\n\t\t\t\t\t\t"+t._s(t.buyNowText)+"\r\n\t\t\t\t\t")])])])]):t._e()]):t._e(),t.detailInfo.pintuan_type&&t.detailInfo.pintuangroup_list.length?n("mt-popup",{staticClass:"common-popup-wrapper",attrs:{position:"right"},model:{value:t.subjectVisible,callback:function(e){t.subjectVisible=e},expression:"subjectVisible"}},[n("div",{staticClass:"common-header-wrap"},[n("mt-header",{staticClass:"common-header",attrs:{title:"拼团列表"}},[n("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:function(e){t.subjectVisible=!1}},slot:"left"})],1)],1),n("div",{staticClass:"common-popup-content"},t._l(t.detailInfo.pintuangroup_list,(function(e,i){return n("div",{on:{click:function(i){return t.goPintuan(e)}}},[t.detailInfo.pintuangroup_share_id>0&&e.pintuangroup_headid!=t.detailInfo.pintuangroup_share_id?t._e():n("mt-cell",{attrs:{title:e.member_name,"is-link":""}},[n("span",[t._v(t._s(e.pintuangroup_surplus>0?"还差"+e.pintuangroup_surplus+"人":"已满员"))]),n("img",{attrs:{slot:"icon",src:e.pintuangroup_avatar,width:"24",height:"24"},slot:"icon"})])],1)})),0)]):t._e()],1)},o=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("55dd"),i("5fc6"),i("5af2")),r=i.n(a),s=i("bd86"),d=i("2f62"),u=i("8a03"),c=i("93c6");function f(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?f(i,!0).forEach((function(e){Object(s["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):f(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var p={data:function(){return{pintuangroup_id:0,subjectVisible:!1,addCartText:"加入购物车",buyNowText:"立即购买",numbers:this.$store.state.goodsdetail.number>0?this.$store.state.goodsdetail.number:1,currentStock:this.$store.state.goodsdetail.detailInfo.goods_storage,productId:this.$store.state.goodsdetail.currentProductId,toastConfig:{message:"商品达到每单限购数量",position:"middle"},ids:[],info:[],propertiPrice:0,earlier:{}}},props:{isShowcartInfo:{type:Boolean,default:!1}},created:function(){this.detailInfo.bargain_info?this.detailInfo.bargainorder_info?2==this.detailInfo.bargainorder_info.bargainorder_state?this.buyNowText="砍价成功去下单":this.buyNowText="正在砍价":this.buyNowText="发起砍价":this.detailInfo.pintuan_type?(this.addCartText="参加拼团",this.buyNowText="立刻开团",this.propertiPrice=this.detailInfo.pintuan_price):1==this.detailInfo.is_presell?this.buyNowText="预售购买（"+this.$moment.unix(this.detailInfo.presell_deliverdate).format("YYYY年MM月DD日")+"发货）":1==this.detailInfo.is_goodsfcode?this.buyNowText="F码购买":this.detailInfo.promotion_type?this.propertiPrice=this.detailInfo.promotion_price:this.propertiPrice=this.detailInfo.goods_price,this.info=this.chooseinfo.specification,this.ids=Object.assign([],this.chooseinfo.ids)},computed:l({},Object(d["d"])({isOnline:function(t){return t.member.isOnline},token:function(t){return t.member.token},detailInfo:function(t){return t.goodsdetail.detailInfo},specList:function(t){return t.goodsdetail.specList},number:function(t){return t.goodsdetail.number},chooseinfo:function(t){return t.goodsdetail.chooseinfo}})),watch:{numbers:function(t){if(t){var e=this.detailInfo.goods_storage;t<=0?(this.numbers=1,this.toastConfig.message="受不了了，宝贝不能再少了",r()(this.toastConfig)):t>e&&(this.toastConfig.message="商品库存不足",r()(this.toastConfig),this.numbers=e),this.saveNumber(this.numbers)}}},mounted:function(){},methods:l({},Object(d["b"])({getGoodsDetail:"getGoodsDetail"}),{},Object(d["c"])({saveCartState:"saveCartState",saveNumber:"saveNumber",saveChooseInfo:"saveChooseInfo",saveProperties:"saveProperties",setCartNumber:"setCartNumber",saveSelectedCartGoods:"saveSelectedCartGoods"}),{goPintuan:function(t){t.pintuangroup_surplus>0&&(this.pintuangroup_id=t.pintuangroup_id,this.checkProduct(!0))},closeCartInfo:function(t){this.saveCartState(t)},addNumber:function(){this.detailInfo.goods_storage&&this.numbers>this.detailInfo.goods_storage?(this.toastConfig.message="商品库存不足",r()(this.toastConfig),this.numbers=this.detailInfo.goods_storage):this.numbers++},reduceNumber:function(){this.numbers>1?this.numbers--:(this.numbers=1,this.toastConfig.message="受不了了，宝贝不能再少了",r()(this.toastConfig))},checkProduct:function(t){var e=this;if(this.isOnline)if(t)if("1"==this.detailInfo.is_virtual){var i={goods_id:this.detailInfo.goods_id,quantity:this.numbers};this.detailInfo.pintuan_type&&(i["pintuan_id"]=this.detailInfo.pintuan_id,i["pintuangroup_id"]=this.pintuangroup_id),this.$router.push({name:"MemberVrBuyStep1",query:i})}else{var n={buy_now:1,cart_id:this.detailInfo.goods_id+"|"+this.numbers};if(this.detailInfo.bargain_info){if(!this.detailInfo.bargainorder_info)return void Object(c["a"])(this.detailInfo.bargain_info.bargain_id).then((function(t){e.$router.push({name:"HomeBargainshare",query:{bargainorder_id:t.result.bargainorder_id}})})).catch((function(t){r()(t.message)}));if(2!=this.detailInfo.bargainorder_info.bargainorder_state)return void this.$router.push({name:"HomeBargainshare",query:{bargainorder_id:this.detailInfo.bargainorder_info.bargainorder_id}});n["bargainorder_id"]=this.detailInfo.bargainorder_info.bargainorder_id}else this.detailInfo.pintuan_type&&(n["pintuan_id"]=this.detailInfo.pintuan_id,n["pintuangroup_id"]=this.pintuangroup_id);this.$router.push({name:"MemberBuyStep1",query:n})}else this.detailInfo.pintuan_type?this.subjectVisible=!0:Object(u["a"])(this.detailInfo.goods_id,this.numbers).then((function(t){e.$parent.$emit("update-cart-num"),e.$parent.$emit("end-addcart-animation"),r()(t.message)}),(function(t){r()(t.message)}));else this.$router.push({name:"HomeMemberLogin"})},keyDown:function(t){},setCurrentIndex:function(t,e){var i=[];for(var n in e)if("undefined"!==typeof this.detailInfo.goods_spec[n]){delete this.detailInfo.goods_spec[n],this.detailInfo.goods_spec[t]=e[t];break}for(var n in this.detailInfo.goods_spec)i.push(n);i=i.sort(this.sortNumber).join("|"),this.getGoodsDetail({goods_id:this.specList[i],token:this.token,extra:{}}).catch((function(t){r()(t.message)}))},sortNumber:function(t,e){return t-e}})},h=p,_=(i("440a"),i("2877")),g=Object(_["a"])(h,n,o,!1,null,"467d8bfa",null);e["default"]=g.exports},8200:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.detailInfo?i("div",{staticClass:"ui-detail-footer",class:{"hidden-cart-footer":t.ispromotion,"show-cart-footer":!t.ispromotion}},[i("div",{staticClass:"footer-flex"},[i("div",{staticClass:"left"},[i("div",{staticClass:"item",on:{click:function(e){return t.$router.push({name:"HomeStoredetail",query:{id:t.storeInfo.store_id}})}}},[i("span",{staticClass:"iconfont"},[t._v("")]),i("span",{staticClass:"text"},[t._v("店铺")])]),t.config&&"1"==t.config.node_site_use&&t.config.node_site_url?i("div",{staticClass:"item",on:{click:function(e){return t.goChat()}}},[i("span",{staticClass:"iconfont"},[t._v("")]),i("span",{staticClass:"text"},[t._v("客服")])]):t._e(),i("div",{staticClass:"item",on:{click:function(e){return t.goCart()}}},[i("span",{staticClass:"iconfont"},[t._v("")]),t.cartNumber>0?i("span",{staticClass:"icon"},[t._v(t._s(t.getCarCount))]):t._e(),i("span",{staticClass:"text"},[t._v("购物车")])])]),i("div",{staticClass:"right"},[!t.detailInfo.bargain_info&&(!t.detailInfo.pintuan_type&&t.detailInfo.goods_storage>0&&t.detailInfo.cart||t.detailInfo.pintuan_type&&t.detailInfo.pintuangroup_list.length)?i("div",{staticClass:"button active-cart",on:{click:function(e){return t.addShopping(!0)}}},[t._v("\n\t\t\t\t"+t._s(t.detailInfo.pintuan_type?"参加拼团":"加入购物车")+"\n\t\t\t")]):t._e(),!t.detailInfo.bargain_info&&(!t.detailInfo.pintuan_type&&t.detailInfo.goods_storage<=0&&t.detailInfo.cart||t.detailInfo.pintuan_type&&t.detailInfo.goods_storage<=0&&t.detailInfo.pintuangroup_list.length)?i("div",{staticClass:"button disabled-cart"},[t._v("\n\t\t\t\t"+t._s(t.detailInfo.pintuan_type?"参加拼团":"加入购物车")+"\n\t\t\t")]):t._e(),t.detailInfo.goods_storage>0?i("div",{staticClass:"button active-buy",on:{click:function(e){return t.checkout()}}},[t._v("\n\t\t\t\t"+t._s(t.detailInfo.bargain_info?t.detailInfo.bargainorder_info?2==t.detailInfo.bargainorder_info.bargainorder_state?"砍价成功去下单":"正在砍价":"发起砍价":t.detailInfo.pintuan_type?"立刻开团":1==t.detailInfo.is_presell?"预售购买（"+t.$moment.unix(t.detailInfo.presell_deliverdate).format("YYYY年MM月DD日")+"发货）":1==t.detailInfo.is_goodsfcode?"F码购买":"立即购买")+"\n\t\t\t")]):t._e(),t.detailInfo.goods_storage<=0?i("div",{staticClass:"button disabled-buy"},[t._v("\n\t\t\t\t"+t._s(t.detailInfo.bargain_info?t.detailInfo.bargainorder_info?2==t.detailInfo.bargainorder_info.bargainorder_state?"砍价成功去下单":"正在砍价":"发起砍价":t.detailInfo.pintuan_type?"立刻开团":1==t.detailInfo.is_presell?"预售购买（"+t.$moment.unix(t.detailInfo.presell_deliverdate).format("YYYY年MM月DD日")+"发货）":1==t.detailInfo.is_goodsfcode?"F码购买":"立即购买")+"\n\t\t\t")]):t._e()])]),t.detailInfo.goods_storage<=0?i("p",{staticClass:"good-stock-none"},[t._v("\n\t\t所选产品暂时无货，非常抱歉！\n\t")]):t._e(),t.isShowcartInfo?i("shopping",{attrs:{isShowcartInfo:t.isShowcartInfo}}):t._e(),t.isAnimation?i("div",{staticClass:"ui-cart-animation"},[i("mt-spinner",{attrs:{type:"snake",color:"#e93b3d"}})],1):t._e()],1):t._e()},o=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("5fc6"),i("5af2")),r=i.n(a),s=i("bd86"),d=i("2f62"),u=i("76a7"),c=i("8a03"),f=i("93c6");function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(i,!0).forEach((function(e){Object(s["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var h={data:function(){return{cartNumber:0,isAnimation:!1}},components:{shopping:u["default"]},props:{ishidefooter:{type:Boolean,default:!1}},computed:p({},Object(d["d"])({config:function(t){return t.config.config},user:function(t){return t.member.info},isShowcartInfo:function(t){return t.goodsdetail.isShowcartInfo},storeInfo:function(t){return t.goodsdetail.storeInfo},detailInfo:function(t){return t.goodsdetail.detailInfo},isOnline:function(t){return t.member.isOnline},ispromotion:function(t){return t.goodsdetail.ispromotion},chooseinfo:function(t){return t.goodsdetail.chooseinfo},number:function(t){return t.goodsdetail.number}}),{getCarCount:function(){return this.cartNumber>0&&this.cartNumber<100?this.cartNumber:this.cartNumber>=100?"99+":void 0}}),created:function(){var t=this;this.$on("start-addcart-animation",(function(){t.isAnimation=!0})),this.$on("end-addcart-animation",(function(){t.isAnimation=!1,t.saveCartState(!1)})),this.getCartCount(),this.$on("update-cart-num",(function(){t.getCartCount()}))},methods:p({},Object(d["c"])({saveCartState:"saveCartState",changeType:"changeType",saveSelectedCartGoods:"saveSelectedCartGoods"}),{goChat:function(){this.user?this.user.member_id==this.storeInfo.member_id?r()("不能和自己聊天"):this.$router.push({name:"MemberChatInfo",query:{t_id:this.storeInfo.member_id,goods_id:this.detailInfo.goods_id}}):r()("请先登录")},getCartCount:function(){var t=this;this.isOnline&&Object(c["d"])().then((function(e){e&&(t.cartNumber=e.result.cart_count)}))},addShopping:function(t){this.saveCartState(t),this.changeType("确定")},checkout:function(){var t=this;if("1"==this.detailInfo.is_virtual){var e={goods_id:this.detailInfo.goods_id,quantity:1};this.detailInfo.pintuan_type&&(e["pintuan_id"]=this.detailInfo.pintuan_id,e["pintuangroup_id"]=0),this.$router.push({name:"MemberVrBuyStep1",query:e})}else{var i={buy_now:1,cart_id:this.detailInfo.goods_id+"|1"};if(this.detailInfo.bargain_info){if(!this.detailInfo.bargainorder_info)return void Object(f["a"])(this.detailInfo.bargain_info.bargain_id).then((function(e){t.$router.push({name:"HomeBargainshare",query:{bargainorder_id:e.result.bargainorder_id}})})).catch((function(t){r()(t.message)}));if(2!=this.detailInfo.bargainorder_info.bargainorder_state)return void this.$router.push({name:"HomeBargainshare",query:{bargainorder_id:this.detailInfo.bargainorder_info.bargainorder_id}});i["bargainorder_id"]=this.detailInfo.bargainorder_info.bargainorder_id}else this.detailInfo.pintuan_type&&(i["pintuan_id"]=this.detailInfo.pintuan_id,i["pintuangroup_id"]=0);this.$router.push({name:"MemberBuyStep1",query:i})}},goCart:function(){this.isOnline?this.$router.push({name:"HomeCart",params:{type:0}}):this.$router.push({name:"HomeMemberLogin"})},fromatArray:function(t,e){var i="";return t&&(i=e.join(t)),t?i:e},isHasStock:function(t){var e=this.detailInfo.stock;if(e.length>0)for(var i=0,n=e.length;i<=n-1;i++)if(e[i].goods_attr==t)return""+e[i].stock_number}})},_=h,g=(i("9aba"),i("2877")),b=Object(g["a"])(_,n,o,!1,null,"977980a4",null);e["default"]=b.exports},8382:function(t,e,i){},"93c6":function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r}));var n=i("366f"),o=function(t){return Object(n["a"])("/member_bargain/add","POST",{bargain_id:t},"member")},a=function(t){return Object(n["a"])("/member_bargain/add_log","POST",{bargainorder_id:t},"member")},r=function(t){return Object(n["a"])("/member_bargain/get_list","POST",{page:t.page,per_page:t.per_page},"member")}},"9aba":function(t,e,i){"use strict";var n=i("00cd"),o=i.n(n);o.a}}]);